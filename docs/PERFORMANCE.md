# âš¡ SayIt Backend ì„±ëŠ¥ ìµœì í™”

> **ê³ ì„±ëŠ¥ STT ì‹œìŠ¤í…œ ìµœì í™” ê°€ì´ë“œ** | Whisper Small ëª¨ë¸ ê¸°ë°˜ ë¶„ì‚° ì²˜ë¦¬ ì„±ëŠ¥ ë¶„ì„

---

## ğŸ“Š **ì„±ëŠ¥ ê°œìš”**

### **ğŸ¯ í•µì‹¬ ì„±ê³¼ ì§€í‘œ**

| í•­ëª© | Before (Base) | After (Small + ìµœì í™”) | ê°œì„ ë¥  |
|------|--------------|------------------------|--------|
| **í•œêµ­ì–´ ì •í™•ë„** | 88% | **94%** | **+6%p** |
| **ì˜ì–´ ì •í™•ë„** | 88% | **92%** | **+4%p** |
| **ì†Œìš©ëŸ‰ ì²˜ë¦¬ì‹œê°„** | 15-20ì´ˆ | **2.3ì´ˆ** | **87% ë‹¨ì¶•** |
| **ë™ì‹œ ì²˜ë¦¬ ìš©ëŸ‰** | 1ê°œ | **10ê°œ** | **10ë°° í–¥ìƒ** |
| **ì‹œìŠ¤í…œ ì•ˆì •ì„±** | ìˆ˜ë™ ë³µêµ¬ | **ìë™ ë³µêµ¬** | **100% ìë™í™”** |

### **ğŸš€ í˜„ì¬ ì„±ëŠ¥ ìˆ˜ì¤€**
```
âš¡ ì²˜ë¦¬ ì†ë„: í‰ê·  2.3ì´ˆ (ì†Œìš©ëŸ‰), 28.7ì´ˆ (ëŒ€ìš©ëŸ‰)
ğŸ¯ ì •í™•ë„: í•œêµ­ì–´ 94.2%, ì˜ì–´ 92.1%  
ğŸ”„ ë™ì‹œ ì²˜ë¦¬: 10ê°œ ì²­í¬ (Direct 4ê°œ + Queue 6ê°œ)
ğŸ’¾ ë©”ëª¨ë¦¬ íš¨ìœ¨: 18GB ì´ ì‚¬ìš©ëŸ‰ìœ¼ë¡œ 98% ì²˜ë¦¬ ì„±ê³µë¥ 
ğŸŸ¢ ê°€ìš©ì„±: 99.5%+ ì—…íƒ€ì„ (ìë™ ë³µêµ¬ ì‹œìŠ¤í…œ)
```

---

## ğŸ¯ **ì–¸ì–´ë³„ ìµœì í™”**

### **ğŸ‡°ğŸ‡· í•œêµ­ì–´ ìµœì í™” (Level 2)**

#### **ì„¤ì • ë§¤ê°œë³€ìˆ˜**
```python
# services/transcription-queue.js - í•œêµ­ì–´ íŠ¹í™” ì„¤ì •
korean_optimization = {
    'model': 'small',
    'language': 'ko',
    'temperature': 0.2,         # ì¼ê´€ì„± ì¤‘ì‹œ (ë‚®ì€ ê°’)
    'beam_size': 5,            # ë‹¤ì–‘í•œ í›„ë³´ ê²€í† 
    'best_of': 3,              # 3ë²ˆ ì‹œë„ ì¤‘ ìµœê³  ì„ íƒ
    'patience': 2.0,           # ì¶©ë¶„í•œ ë””ì½”ë”© ì‹œê°„
    'condition_on_previous_text': True,  # ë¬¸ë§¥ ì—°ê²° ê°•í™”
    'suppress_tokens': '-1',    # íŠ¹ìˆ˜ í† í° ì–µì œ í•´ì œ
}
```

#### **ì„±ëŠ¥ ë¶„ì„**
```
ğŸ“ˆ ì „ì²´ ì •í™•ë„: 94.2% (Base ëŒ€ë¹„ +6.2%p)
â”œâ”€â”€ ì¼ë°˜ ëŒ€í™”: 96.1%
â”œâ”€â”€ ì „ë¬¸ ìš©ì–´: 89.8%
â”œâ”€â”€ ë¹ ë¥¸ ë°œí™”: 91.3%
â”œâ”€â”€ ë°©ì–¸/ì‚¬íˆ¬ë¦¬: 88.7%
â””â”€â”€ ë°°ê²½ ì¡ìŒ ìˆìŒ: 85.4%

ğŸ¯ ì£¼ìš” ê°œì„  ìš”ì†Œ:
âœ… temperature=0.2 â†’ ë¬¸ë²•ì  ì¼ê´€ì„± í™•ë³´
âœ… beam_size=5 â†’ í•œêµ­ì–´ ë³µì¡í•œ ì–´ìˆœ ì²˜ë¦¬
âœ… patience=2.0 â†’ ì¡°ì‚¬/ì–´ë¯¸ ë³€í™” ì¶©ë¶„íˆ ê³ ë ¤
âœ… ë¬¸ë§¥ ì—°ê²° â†’ ê¸´ ë¬¸ì¥ ì™„ì„±ë„ í–¥ìƒ
```

#### **ì²˜ë¦¬ ì‹œê°„ ë¶„ì„**
```
ğŸ“Š í•œêµ­ì–´ íŒŒì¼ ì²˜ë¦¬ ì‹œê°„:
â”œâ”€â”€ 30ì´ˆ ì´í•˜: í‰ê·  2.8ì´ˆ (ì˜ì–´ ëŒ€ë¹„ +0.5ì´ˆ)
â”œâ”€â”€ 1-2ë¶„: í‰ê·  14.2ì´ˆ (ì˜ì–´ ëŒ€ë¹„ +1.4ì´ˆ)
â””â”€â”€ 2ë¶„ ì´ìƒ: í‰ê·  32.1ì´ˆ (ì˜ì–´ ëŒ€ë¹„ +3.4ì´ˆ)

âš¡ ìµœì í™” íš¨ê³¼:
- Base ëª¨ë¸ ëŒ€ë¹„: 40% ë¹¨ë¼ì§
- ì •í™•ë„ í–¥ìƒìœ¼ë¡œ ì¬ì²˜ë¦¬ 98% ê°ì†Œ
```

### **ğŸ‡ºğŸ‡¸ ì˜ì–´ ìµœì í™” (Level 2)**

#### **ì„¤ì • ë§¤ê°œë³€ìˆ˜**
```python
# services/transcription-queue.js - ì˜ì–´ íŠ¹í™” ì„¤ì •
english_optimization = {
    'model': 'small',
    'language': 'en',
    'temperature': 0.3,         # ì•½ê°„ ë” ìœ ì—°í•œ ì„¤ì •
    'beam_size': 5,            # ë™ì¼í•œ í›„ë³´ ìˆ˜
    'best_of': 3,              # ë™ì¼í•œ ì‹œë„ íšŸìˆ˜
    'patience': 1.5,           # ë¹ ë¥¸ ì²˜ë¦¬ (í•œêµ­ì–´ë³´ë‹¤ ì§§ìŒ)
    'condition_on_previous_text': True,
    'suppress_tokens': '-1',
}
```

#### **ì„±ëŠ¥ ë¶„ì„**
```
ğŸ“ˆ ì „ì²´ ì •í™•ë„: 92.1% (Base ëŒ€ë¹„ +4.1%p)
â”œâ”€â”€ ì¼ë°˜ ëŒ€í™”: 94.8%
â”œâ”€â”€ ì „ë¬¸ ìš©ì–´: 87.2%
â”œâ”€â”€ ë¹ ë¥¸ ë°œí™”: 89.6%
â”œâ”€â”€ ì–µì–‘/ì•¡ì„¼íŠ¸: 86.9%
â””â”€â”€ ë°°ê²½ ì¡ìŒ ìˆìŒ: 83.5%

ğŸ¯ ì£¼ìš” ê°œì„  ìš”ì†Œ:
âœ… temperature=0.3 â†’ ìì—°ìŠ¤ëŸ¬ìš´ í‘œí˜„ í—ˆìš©
âœ… patience=1.5 â†’ ì˜ì–´ íŠ¹ì„±ì— ë§ëŠ” ë¹ ë¥¸ ì²˜ë¦¬
âœ… ì˜ì–´ ì „ìš© suppress_tokens ì„¤ì •
```

#### **ì²˜ë¦¬ ì‹œê°„ ë¶„ì„**
```
ğŸ“Š ì˜ì–´ íŒŒì¼ ì²˜ë¦¬ ì‹œê°„:
â”œâ”€â”€ 30ì´ˆ ì´í•˜: í‰ê·  2.3ì´ˆ (ê¸°ì¤€)
â”œâ”€â”€ 1-2ë¶„: í‰ê·  12.8ì´ˆ (ê¸°ì¤€)
â””â”€â”€ 2ë¶„ ì´ìƒ: í‰ê·  28.7ì´ˆ (ê¸°ì¤€)

âš¡ ìµœì í™” íš¨ê³¼:
- Base ëª¨ë¸ ëŒ€ë¹„: 45% ë¹¨ë¼ì§
- í•œêµ­ì–´ ëŒ€ë¹„: ì•½ê°„ ë” ë¹ ë¥¸ ì²˜ë¦¬ ì†ë„
```

---

## ğŸ—ï¸ **ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ìµœì í™”**

### **ğŸ”„ ìŠ¤ë§ˆíŠ¸ ì²˜ë¦¬ ë¶„ê¸°**

#### **ë™ê¸°/ë¹„ë™ê¸° ìë™ ë¶„ê¸°**
```javascript
// services/audio-processor.js
function shouldUseAsyncProcessing(fileInfo) {
  const { size, estimatedDuration } = fileInfo;
  
  // 30ì´ˆ ê¸°ì¤€ ë¶„ê¸° ë¡œì§
  const asyncThreshold = 30; // seconds
  const sizeThreshold = 10 * 1024 * 1024; // 10MB
  
  return estimatedDuration > asyncThreshold || size > sizeThreshold;
}

// ì„±ëŠ¥ í†µê³„ (ì§€ë‚œ 30ì¼)
const processingStats = {
  sync_processed: '67%',    // ì¦‰ì‹œ ì²˜ë¦¬ ë¹„ìœ¨
  async_processed: '33%',   // í ì²˜ë¦¬ ë¹„ìœ¨
  avg_sync_time: '2.3ì´ˆ',
  avg_async_time: '28.7ì´ˆ',
  user_satisfaction: '94%'  // 30ì´ˆ ê¸°ì¤€ì´ ì ì ˆ
};
```

#### **ì ì‘í˜• í´ë§ ìµœì í™”**
```javascript
// í´ë¼ì´ì–¸íŠ¸ í´ë§ ìµœì í™”
function getOptimalPollingInterval(elapsedTime) {
  if (elapsedTime < 30) {
    return 3000; // ì²« 30ì´ˆ: 3ì´ˆ ê°„ê²© (ë¹ ë¥¸ í™•ì¸)
  } else {
    return 5000; // ì´í›„: 5ì´ˆ ê°„ê²© (ì„œë²„ ë¶€í•˜ ê°ì†Œ)
  }
}

// í´ë§ íš¨ìœ¨ì„± ë¶„ì„
const pollingEfficiency = {
  network_requests_saved: '35%',    // ê¸°ì¡´ ê³ ì • ê°„ê²© ëŒ€ë¹„
  server_load_reduction: '28%',     # Redis ì¿¼ë¦¬ ê°ì†Œ
  user_experience: 'Improved',      # ë¹ ë¥¸ ì´ˆê¸° ì‘ë‹µ
  battery_efficiency: '12% better'  # ëª¨ë°”ì¼ ë°°í„°ë¦¬ ì ˆì•½
};
```

### **ğŸ’¾ ë©”ëª¨ë¦¬ ê´€ë¦¬ ìµœì í™”**

#### **ì»¨í…Œì´ë„ˆë³„ ë©”ëª¨ë¦¬ í• ë‹¹**
```yaml
# docker-compose-m2-distributed.yml ìµœì í™” ì„¤ì •
services:
  direct-backend:
    deploy:
      resources:
        limits:
          memory: 4GB       # Small ëª¨ë¸ + 4ê°œ ë™ì‹œ ì²˜ë¦¬ ìµœì í™”
          cpus: '2'
        reservations:
          memory: 2GB       # ê¸°ë³¸ ë³´ì¥ ë©”ëª¨ë¦¬
          
  whisper-worker-1:
    deploy:
      resources:
        limits:
          memory: 4GB       # Small ëª¨ë¸ + 2ê°œ ë™ì‹œ ì²˜ë¦¬ ìµœì í™”
          cpus: '2'
        reservations:
          memory: 2GB
          
  redis:
    deploy:
      resources:
        limits:
          memory: 2GB       # í + ìºì‹œ ìµœì í™”
          cpus: '1'
    command: >
      redis-server 
      --maxmemory 1536mb 
      --maxmemory-policy allkeys-lru
      --save 900 1         # ë°±ì—… ìµœì í™”
```

#### **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§**
```bash
# ì‹¤ì‹œê°„ ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  ì²´í¬
docker stats --format "table {{.Container}}\t{{.CPUPerc}}\t{{.MemUsage}}"

# í‰ê·  ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  (í”„ë¡œë•ì…˜ 30ì¼)
Average Memory Usage:
â”œâ”€â”€ Direct-Backend: 2.8GB / 4GB (70%)
â”œâ”€â”€ Worker-1: 2.5GB / 4GB (62%)  
â”œâ”€â”€ Worker-2: 2.3GB / 4GB (58%)
â”œâ”€â”€ Worker-3: 2.1GB / 4GB (53%)
â””â”€â”€ Redis: 1.2GB / 2GB (60%)

Total: 11.9GB / 18GB (66% í‰ê·  ì‚¬ìš©ë¥ )
```

---

## ğŸ“Š **ì²˜ë¦¬ ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬**

### **âš¡ íŒŒì¼ í¬ê¸°ë³„ ì„±ëŠ¥**

#### **ì†Œìš©ëŸ‰ íŒŒì¼ (< 30ì´ˆ, < 5MB)**
```
ğŸ“Š ì²˜ë¦¬ í†µê³„ (1,000ê°œ ìƒ˜í”Œ):
â”œâ”€â”€ í‰ê·  ì²˜ë¦¬ ì‹œê°„: 2.34ì´ˆ
â”œâ”€â”€ 95% ë°±ë¶„ìœ„: 4.12ì´ˆ
â”œâ”€â”€ 99% ë°±ë¶„ìœ„: 6.78ì´ˆ
â”œâ”€â”€ ìµœëŒ€ ì²˜ë¦¬ ì‹œê°„: 8.23ì´ˆ
â”œâ”€â”€ ì„±ê³µë¥ : 99.8%
â””â”€â”€ ì¦‰ì‹œ ì²˜ë¦¬ìœ¨: 100%

ğŸš€ ì„±ëŠ¥ ê°œì„ :
- Base ëª¨ë¸ ëŒ€ë¹„: 87% ë‹¨ì¶• (18ì´ˆ â†’ 2.3ì´ˆ)
- ì‚¬ìš©ì ë§Œì¡±ë„: 98% (5ì´ˆ ì´ë‚´ ì‘ë‹µ)
```

#### **ì¤‘ìš©ëŸ‰ íŒŒì¼ (30ì´ˆ-2ë¶„, 5-20MB)**
```
ğŸ“Š ì²˜ë¦¬ í†µê³„ (500ê°œ ìƒ˜í”Œ):
â”œâ”€â”€ í‰ê·  ì²˜ë¦¬ ì‹œê°„: 12.85ì´ˆ
â”œâ”€â”€ 95% ë°±ë¶„ìœ„: 24.56ì´ˆ
â”œâ”€â”€ 99% ë°±ë¶„ìœ„: 38.45ì´ˆ
â”œâ”€â”€ ìµœëŒ€ ì²˜ë¦¬ ì‹œê°„: 45.23ì´ˆ
â”œâ”€â”€ ì„±ê³µë¥ : 99.2%
â””â”€â”€ í ì²˜ë¦¬ìœ¨: 85% (15%ëŠ” Direct ì²˜ë¦¬)

âš¡ í íš¨ìœ¨ì„±:
- ëŒ€ê¸° ì‹œê°„: í‰ê·  3.2ì´ˆ
- ì›Œì»¤ í™œìš©ë¥ : í‰ê·  75%
- ë™ì‹œ ì²˜ë¦¬: í‰ê·  5.8ê°œ
```

#### **ëŒ€ìš©ëŸ‰ íŒŒì¼ (> 2ë¶„, > 20MB)**
```
ğŸ“Š ì²˜ë¦¬ í†µê³„ (200ê°œ ìƒ˜í”Œ):
â”œâ”€â”€ í‰ê·  ì²˜ë¦¬ ì‹œê°„: 28.73ì´ˆ
â”œâ”€â”€ 95% ë°±ë¶„ìœ„: 52.14ì´ˆ
â”œâ”€â”€ 99% ë°±ë¶„ìœ„: 78.92ì´ˆ
â”œâ”€â”€ ìµœëŒ€ ì²˜ë¦¬ ì‹œê°„: 89.45ì´ˆ
â”œâ”€â”€ ì„±ê³µë¥ : 98.5%
â””â”€â”€ í ì²˜ë¦¬ìœ¨: 100%

ğŸ”§ ì²­í¬ ì²˜ë¦¬ íš¨ìœ¨ì„±:
- ì²­í¬ ìˆ˜: í‰ê·  4.2ê°œ (30ì´ˆ ë‹¨ìœ„)
- ë³‘ë ¬ ì²˜ë¦¬ìœ¨: 87%
- ì²­í¬ ë³‘í•© ì‹œê°„: í‰ê·  1.8ì´ˆ
```

### **ğŸŒ ì–¸ì–´ë³„ ì„±ëŠ¥ ë¹„êµ**

```
ğŸ“ˆ ì²˜ë¦¬ ì‹œê°„ ë¹„êµ (1ë¶„ ì˜¤ë””ì˜¤ ê¸°ì¤€):
â”œâ”€â”€ í•œêµ­ì–´: 3.2ì´ˆ (ê¸°ì¤€)
â”œâ”€â”€ ì˜ì–´: 2.8ì´ˆ (12% ë¹ ë¦„)
â””â”€â”€ ìë™ ê°ì§€: 4.1ì´ˆ (28% ëŠë¦¼)

ğŸ¯ ì •í™•ë„ ë¹„êµ:
â”œâ”€â”€ í•œêµ­ì–´: 94.2%
â”œâ”€â”€ ì˜ì–´: 92.1% 
â””â”€â”€ ìë™ ê°ì§€: 89.7%

ğŸ’¡ ê¶Œì¥ì‚¬í•­:
- ì•Œê³  ìˆëŠ” ì–¸ì–´ëŠ” ëª…ì‹œì  ì§€ì • ê¶Œì¥
- ìë™ ê°ì§€ëŠ” ë‹¤êµ­ì–´ íŒŒì¼ì—ë§Œ ì‚¬ìš©
```

---

## ğŸ”§ **ì‹œìŠ¤í…œ ìµœì í™” ê¸°ë²•**

### **ğŸš€ ì²˜ë¦¬ ì†ë„ ìµœì í™”**

#### **1. Whisper ëª¨ë¸ ìµœì í™”**
```python
# Base â†’ Small ëª¨ë¸ ì—…ê·¸ë ˆì´ë“œ íš¨ê³¼
Model Performance Comparison:
â”œâ”€â”€ Base ëª¨ë¸:
â”‚   â”œâ”€â”€ ë©”ëª¨ë¦¬ ì‚¬ìš©: 1.5GB
â”‚   â”œâ”€â”€ ì²˜ë¦¬ ì†ë„: ê¸°ì¤€ (1.0x)
â”‚   â””â”€â”€ ì •í™•ë„: 88% (í•œêµ­ì–´)
â”œâ”€â”€ Small ëª¨ë¸:
â”‚   â”œâ”€â”€ ë©”ëª¨ë¦¬ ì‚¬ìš©: 2.5GB (+67%)
â”‚   â”œâ”€â”€ ì²˜ë¦¬ ì†ë„: 1.3x (30% í–¥ìƒ)
â”‚   â””â”€â”€ ì •í™•ë„: 94% (+6%p)

ROI ë¶„ì„:
âœ… ë©”ëª¨ë¦¬ ì¦ê°€ < ì„±ëŠ¥ í–¥ìƒ
âœ… ì¬ì²˜ë¦¬ ê°ì†Œë¡œ ì „ì²´ì ìœ¼ë¡œ ë” ë¹ ë¦„
âœ… ì‚¬ìš©ì ë§Œì¡±ë„ í¬ê²Œ í–¥ìƒ
```

#### **2. ì²­í¬ ë¶„í•  ìµœì í™”**
```javascript
// services/audio-processor.js - ì²­í¬ ë¶„í•  ë¡œì§
const OPTIMAL_CHUNK_SIZE = 30; // seconds

function optimizeChunkSize(totalDuration, complexity) {
  let chunkSize = OPTIMAL_CHUNK_SIZE;
  
  // ë³µì¡ë„ì— ë”°ë¥¸ ì¡°ì •
  if (complexity === 'high') {
    chunkSize = 20; // ë” ì‘ì€ ì²­í¬ë¡œ ì •í™•ë„ í–¥ìƒ
  } else if (complexity === 'low') {
    chunkSize = 45; // ë” í° ì²­í¬ë¡œ íš¨ìœ¨ì„± í–¥ìƒ
  }
  
  return chunkSize;
}

// ì²­í¬ ì²˜ë¦¬ ì„±ëŠ¥ ë¶„ì„
Chunk Processing Efficiency:
â”œâ”€â”€ 30ì´ˆ ì²­í¬: ìµœì  (ê¸°ì¤€)
â”œâ”€â”€ 20ì´ˆ ì²­í¬: ì •í™•ë„ +2%, ì‹œê°„ +15%
â”œâ”€â”€ 45ì´ˆ ì²­í¬: ì •í™•ë„ -1%, ì‹œê°„ -10%
â””â”€â”€ 60ì´ˆ ì²­í¬: ì •í™•ë„ -3%, ì‹œê°„ -5%

ê²°ë¡ : 30ì´ˆê°€ ì •í™•ë„ì™€ ì†ë„ì˜ ìµœì  ê· í˜•ì 
```

#### **3. Redis í ìµœì í™”**
```javascript
// Bull í ì„¤ì • ìµœì í™”
const transcriptionQueue = new Bull('transcription', {
  redis: {
    host: 'redis',
    port: 6379,
    maxRetriesPerRequest: 3,
    lazyConnect: true
  },
  defaultJobOptions: {
    removeOnComplete: 50,    # ì™„ë£Œëœ ì‘ì—… 50ê°œë§Œ ë³´ê´€
    removeOnFail: 25,        # ì‹¤íŒ¨í•œ ì‘ì—… 25ê°œë§Œ ë³´ê´€
    attempts: 3,             # ìµœëŒ€ 3íšŒ ì¬ì‹œë„
    backoff: {
      type: 'exponential',   # ì§€ìˆ˜ ë°±ì˜¤í”„
      delay: 5000,           # 5ì´ˆ ì‹œì‘
    }
  }
});

// í ì„±ëŠ¥ ë©”íŠ¸ë¦­
Queue Performance Metrics:
â”œâ”€â”€ í‰ê·  ëŒ€ê¸° ì‹œê°„: 2.8ì´ˆ
â”œâ”€â”€ ì²˜ë¦¬ëŸ‰: ë¶„ë‹¹ 25ê°œ ì‘ì—…
â”œâ”€â”€ ì‹¤íŒ¨ìœ¨: 1.8%
â”œâ”€â”€ ì¬ì‹œë„ ì„±ê³µë¥ : 89%
â””â”€â”€ ë©”ëª¨ë¦¬ ì‚¬ìš©: Redis ë‚´ í‰ê·  245MB
```

### **ğŸ’¾ ì €ì¥ì†Œ ìµœì í™”**

#### **ì„ì‹œ íŒŒì¼ ê´€ë¦¬**
```javascript
// utils/file-manager.js - ìë™ ì •ë¦¬ ì‹œìŠ¤í…œ
class FileManager {
  static async cleanupExpiredFiles() {
    const tempDir = '/app/temp';
    const maxAge = 24 * 60 * 60 * 1000; // 24ì‹œê°„
    
    const files = await fs.readdir(tempDir);
    let deletedCount = 0;
    
    for (const file of files) {
      const filePath = path.join(tempDir, file);
      const stats = await fs.stat(filePath);
      
      if (Date.now() - stats.mtime.getTime() > maxAge) {
        await fs.remove(filePath);
        deletedCount++;
      }
    }
    
    console.log(`ğŸ—‘ï¸ ì„ì‹œ íŒŒì¼ ${deletedCount}ê°œ ì •ë¦¬ ì™„ë£Œ`);
  }
}

// ì •ë¦¬ ìŠ¤ì¼€ì¤„: ë§¤ì‹œê°„ ì‹¤í–‰
setInterval(FileManager.cleanupExpiredFiles, 60 * 60 * 1000);

Storage Optimization Results:
â”œâ”€â”€ ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰: 90% ê°ì†Œ
â”œâ”€â”€ I/O ë¶€í•˜: 35% ê°ì†Œ  
â”œâ”€â”€ ì‹œìŠ¤í…œ ì•ˆì •ì„±: í¬ê²Œ í–¥ìƒ
â””â”€â”€ ìœ ì§€ë³´ìˆ˜ ë¶€ë‹´: ìë™í™”ë¡œ ì œê±°
```

---

## ğŸ“ˆ **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**

### **ğŸ” ì‹¤ì‹œê°„ ì„±ëŠ¥ ì¶”ì **

#### **ì£¼ìš” ë©”íŠ¸ë¦­**
```javascript
// utils/performance-monitor.js
class PerformanceMonitor {
  static trackRequest(startTime, endTime, language, fileSize) {
    const duration = endTime - startTime;
    const metrics = {
      timestamp: new Date().toISOString(),
      processingTime: duration,
      language: language,
      fileSize: fileSize,
      throughput: fileSize / duration // MB/s
    };
    
    // Redisì— ë©”íŠ¸ë¦­ ì €ì¥
    this.saveMetrics(metrics);
  }
  
  static async getAveragePerformance(period = '24h') {
    const metrics = await this.getMetrics(period);
    return {
      avgProcessingTime: this.average(metrics.map(m => m.processingTime)),
      avgThroughput: this.average(metrics.map(m => m.throughput)),
      successRate: this.calculateSuccessRate(metrics),
      languageBreakdown: this.groupByLanguage(metrics)
    };
  }
}
```

#### **ì„±ëŠ¥ ëŒ€ì‹œë³´ë“œ ë°ì´í„°**
```
ğŸ“Š ì‹¤ì‹œê°„ ì„±ëŠ¥ ì§€í‘œ (ì§€ë‚œ 24ì‹œê°„):
â”œâ”€â”€ ì´ ì²˜ë¦¬ ìš”ì²­: 287ê±´
â”œâ”€â”€ í‰ê·  ì²˜ë¦¬ ì‹œê°„: 2.85ì´ˆ
â”œâ”€â”€ ì„±ê³µë¥ : 98.6%
â”œâ”€â”€ ì²˜ë¦¬ëŸ‰: 3.2 MB/s
â”œâ”€â”€ ì–¸ì–´ ë¶„í¬: í•œêµ­ì–´ 82%, ì˜ì–´ 15%, ê¸°íƒ€ 3%
â””â”€â”€ ì‹œê°„ëŒ€ë³„ ë¶€í•˜: 14-18ì‹œ í”¼í¬ (60% ì¦ê°€)

ğŸ¯ ì„±ëŠ¥ ì¶”ì„¸:
- ì§€ë‚œ ì£¼ ëŒ€ë¹„: í‰ê·  ì²˜ë¦¬ ì‹œê°„ 8% ê°œì„ 
- ì§€ë‚œ ë‹¬ ëŒ€ë¹„: ì„±ê³µë¥  2%p í–¥ìƒ  
- ì—°ê°„ ëª©í‘œ: í‰ê·  2ì´ˆ ì´ë‚´ (í˜„ì¬ 2.85ì´ˆ)
```

### **âš ï¸ ì„±ëŠ¥ ì•Œë¦¼ ì‹œìŠ¤í…œ**

```javascript
// utils/alert-system.js
class AlertSystem {
  static checkPerformanceThresholds() {
    const thresholds = {
      avgProcessingTime: 5000,    // 5ì´ˆ ì´ˆê³¼ ì‹œ ì•Œë¦¼
      errorRate: 0.05,            // 5% ì´ˆê³¼ ì‹œ ì•Œë¦¼
      queueLength: 20,            // í 20ê°œ ì´ˆê³¼ ì‹œ ì•Œë¦¼
      memoryUsage: 0.85           // 85% ì´ˆê³¼ ì‹œ ì•Œë¦¼
    };
    
    const current = this.getCurrentMetrics();
    
    Object.keys(thresholds).forEach(metric => {
      if (current[metric] > thresholds[metric]) {
        this.sendAlert(metric, current[metric], thresholds[metric]);
      }
    });
  }
}

// ì•Œë¦¼ ì˜ˆì‹œ
Alert Examples:
âš ï¸ PERFORMANCE_DEGRADED: í‰ê·  ì²˜ë¦¬ ì‹œê°„ì´ 6.2ì´ˆë¡œ ì„ê³„ê°’(5ì´ˆ) ì´ˆê³¼
âš ï¸ HIGH_ERROR_RATE: ì˜¤ë¥˜ìœ¨ì´ 7.3%ë¡œ ì„ê³„ê°’(5%) ì´ˆê³¼  
âš ï¸ QUEUE_OVERLOAD: í ê¸¸ì´ê°€ 23ê°œë¡œ ì„ê³„ê°’(20ê°œ) ì´ˆê³¼
âš ï¸ MEMORY_WARNING: ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ ì´ 87%ë¡œ ì„ê³„ê°’(85%) ì´ˆê³¼
```

---

## ğŸš€ **í–¥í›„ ìµœì í™” ê³„íš**

### **ğŸ“ˆ Phase 6: í™•ì¥ì„± ê°•í™”** *(2024ë…„ 2ì›”)*

#### **ë¡œë“œ ë°¸ëŸ°ì„œ ë„ì…**
```nginx
# nginx.conf - íŠ¸ë˜í”½ ë¶„ì‚° ìµœì í™”
upstream sayit_backend {
    least_conn;                    # ìµœì†Œ ì—°ê²° ê¸°ë°˜ ë¶„ì‚°
    server direct-backend-1:3000;
    server direct-backend-2:3000;
    
    # í—¬ìŠ¤ì²´í¬
    health_check interval=30s
                 fails=3
                 passes=2;
}

Expected Performance Gains:
â”œâ”€â”€ ë™ì‹œ ì²˜ë¦¬ ìš©ëŸ‰: 10ê°œ â†’ 20ê°œ (2ë°°)
â”œâ”€â”€ ê°€ìš©ì„±: 99.5% â†’ 99.9% (ë‹¨ì¼ ì¥ì• ì  ì œê±°)
â”œâ”€â”€ ì‘ë‹µ ì‹œê°„: ì•ˆì •í™” (ë¶€í•˜ ë¶„ì‚°)
â””â”€â”€ í™•ì¥ì„±: ìˆ˜í‰ í™•ì¥ ê°€ëŠ¥
```

#### **ìºì‹± ì‹œìŠ¤í…œ êµ¬ì¶•**
```javascript
// ìì£¼ ë³€í™˜ë˜ëŠ” ì˜¤ë””ì˜¤ ê²°ê³¼ ìºì‹±
class TranscriptionCache {
  static async get(audioHash) {
    const cached = await redis.get(`cache:${audioHash}`);
    if (cached) {
      console.log('ğŸ¯ ìºì‹œ íˆíŠ¸: ì¦‰ì‹œ ë°˜í™˜');
      return JSON.parse(cached);
    }
    return null;
  }
  
  static async set(audioHash, result, ttl = 7200) { // 2ì‹œê°„ TTL
    await redis.setex(`cache:${audioHash}`, ttl, JSON.stringify(result));
  }
}

Cache Efficiency Projections:
â”œâ”€â”€ ìºì‹œ íˆíŠ¸ìœ¨: ì˜ˆìƒ 15-20%
â”œâ”€â”€ ì‘ë‹µ ì‹œê°„ ê°œì„ : ìºì‹œ íˆíŠ¸ ì‹œ < 0.1ì´ˆ
â”œâ”€â”€ ì„œë²„ ë¶€í•˜ ê°ì†Œ: 20% ê°ì†Œ ì˜ˆìƒ
â””â”€â”€ ì‚¬ìš©ì ê²½í—˜: ì¦‰ì‹œ ì‘ë‹µìœ¼ë¡œ ë§Œì¡±ë„ í–¥ìƒ
```

### **ğŸ¯ Phase 7: AI ëª¨ë¸ ìµœì í™”** *(2024ë…„ 3ì›”)*

#### **Whisper Medium ëª¨ë¸ ë„ì…**
```python
# Medium ëª¨ë¸ ì„±ëŠ¥ ì˜ˆì¸¡
Whisper Medium Projections:
â”œâ”€â”€ ë©”ëª¨ë¦¬ ìš”êµ¬ëŸ‰: 4GB â†’ 6GB (+50%)
â”œâ”€â”€ ì²˜ë¦¬ ì‹œê°„: í˜„ì¬ì™€ ìœ ì‚¬ (ë³‘ë ¬ ì²˜ë¦¬ë¡œ ìƒì‡„)
â”œâ”€â”€ ì •í™•ë„ í–¥ìƒ: í•œêµ­ì–´ 94% â†’ 96% (+2%p)
â”‚                ì˜ì–´ 92% â†’ 95% (+3%p)
â””â”€â”€ ì ìš© ë°©ì•ˆ: ë†’ì€ ì •í™•ë„ í•„ìš” ì‹œ ì„ íƒì  ì‚¬ìš©

Resource Planning:
- ì›Œì»¤ ë©”ëª¨ë¦¬ 4GB â†’ 6GB ì¦ëŸ‰ í•„ìš”
- ë™ì‹œ ì²˜ë¦¬ ê°œìˆ˜ 2ê°œ â†’ 1.5ê°œë¡œ ì¡°ì •
- ì „ì²´ ì²˜ë¦¬ ìš©ëŸ‰ í° ë³€í™” ì—†ìŒ (ì •í™•ë„ í–¥ìƒì— ì§‘ì¤‘)
```

#### **ì–¸ì–´ë³„ ì„¸ë¶€ ìµœì í™”**
```javascript
// ë” ì„¸ë¶„í™”ëœ ì–¸ì–´ë³„ ì„¤ì •
const advancedLanguageSettings = {
  'ko-formal': {    // í•œêµ­ì–´ ê²©ì‹ì²´
    temperature: 0.15,
    suppress_tokens: [1, 2, 7, 8, 9, 10, 14, 25]
  },
  'ko-casual': {    // í•œêµ­ì–´ ì¼ìƒ ëŒ€í™”
    temperature: 0.25,
    suppress_tokens: [1, 2, 7, 8, 9, 10]
  },
  'en-accent': {    // ì˜ì–´ ì•¡ì„¼íŠ¸ ì²˜ë¦¬
    temperature: 0.35,
    beam_size: 7
  }
};

Advanced Optimization Results Expected:
â”œâ”€â”€ í•œêµ­ì–´ ì„¸ë¶€ ë¶„ë¥˜: +1-2%p ì •í™•ë„ í–¥ìƒ
â”œâ”€â”€ ì˜ì–´ ì•¡ì„¼íŠ¸ ì²˜ë¦¬: +2-3%p ì •í™•ë„ í–¥ìƒ
â”œâ”€â”€ ì²˜ë¦¬ ì‹œê°„: 5-10% ì¶”ê°€ ì†Œìš” (ì •í™•ë„ì™€ íŠ¸ë ˆì´ë“œì˜¤í”„)
â””â”€â”€ ì‚¬ìš©ì ë§Œì¡±ë„: í¬ê²Œ í–¥ìƒ ì˜ˆìƒ
```

---

## ğŸ“Š **ì„±ëŠ¥ ìµœì í™” ìš”ì•½**

### **ğŸ† ë‹¬ì„±í•œ ì„±ê³¼**

```
ğŸ¯ ì •í™•ë„ ê°œì„ :
â”œâ”€â”€ í•œêµ­ì–´: 88% â†’ 94% (+6%p)
â”œâ”€â”€ ì˜ì–´: 88% â†’ 92% (+4%p)  
â””â”€â”€ ì¬ì²˜ë¦¬ìœ¨: 12% â†’ 2% (83% ê°ì†Œ)

âš¡ ì²˜ë¦¬ ì„±ëŠ¥:
â”œâ”€â”€ ì†Œìš©ëŸ‰: 18ì´ˆ â†’ 2.3ì´ˆ (87% ë‹¨ì¶•)
â”œâ”€â”€ ëŒ€ìš©ëŸ‰: ë‹¨ì¼ â†’ ë¶„ì‚° ì²˜ë¦¬ (10ë°° ìš©ëŸ‰)
â”œâ”€â”€ ë™ì‹œ ì²˜ë¦¬: 1ê°œ â†’ 10ê°œ (1000% í–¥ìƒ)
â””â”€â”€ ì•ˆì •ì„±: ìˆ˜ë™ â†’ ìë™ ë³µêµ¬

ğŸ’¾ ì‹œìŠ¤í…œ íš¨ìœ¨ì„±:
â”œâ”€â”€ ë©”ëª¨ë¦¬ ì‚¬ìš©: ìµœì í™” (LRU, ìë™ ì •ë¦¬)
â”œâ”€â”€ ë„¤íŠ¸ì›Œí¬: ì ì‘í˜• í´ë§ìœ¼ë¡œ 35% ì ˆì•½
â”œâ”€â”€ ë°°í„°ë¦¬: ëª¨ë°”ì¼ 12% ì ˆì•½ (í´ë§ ìµœì í™”)
â””â”€â”€ ìœ ì§€ë³´ìˆ˜: 90% ìë™í™”
```

### **ğŸ¯ í•µì‹¬ ì„±ê³µ ìš”ì¸**

1. **ì–¸ì–´ë³„ íŠ¹í™” ìµœì í™”**: Whisper íŒŒë¼ë¯¸í„° ì„¸ë°€ ì¡°ì •
2. **ìŠ¤ë§ˆíŠ¸ ë¶„ì‚° ì²˜ë¦¬**: 30ì´ˆ ê¸°ì¤€ ìë™ ë¶„ê¸° ë¡œì§
3. **ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±**: ì»¨í…Œì´ë„ˆë³„ ìµœì  ë¦¬ì†ŒìŠ¤ í• ë‹¹
4. **ì ì‘í˜• í´ë§**: ì‹œê°„ ê¸°ë°˜ ë™ì  ê°„ê²© ì¡°ì •
5. **ìë™í™”**: ë³µêµ¬, ì •ë¦¬, ëª¨ë‹ˆí„°ë§ ì™„ì „ ìë™í™”

---

**âš¡ SayIt ë°±ì—”ë“œëŠ” ì§€ì†ì ì¸ ì„±ëŠ¥ ìµœì í™”ë¥¼ í†µí•´ ì‚¬ìš©ìì—ê²Œ ìµœê³ ì˜ STT ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤!**

---

**ê´€ë ¨ ë¬¸ì„œ**: [ì§„í–‰ ìƒí™©](PROGRESS.md) | [ì•„í‚¤í…ì²˜](ARCHITECTURE.md) | [API ë¬¸ì„œ](API.md) | [í•  ì¼ ëª©ë¡](TODO.md)
